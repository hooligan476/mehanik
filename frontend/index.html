<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Mehanik | Главная</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/auth.css" />
  <link rel="stylesheet" href="css/modal.css" />
  <link rel="stylesheet" href="css/addproduct.css" />
  <link rel="stylesheet" href="css/supportchat.css" />
  <link rel="stylesheet" href="css/profileModal.css" />


  <script src="js/auth.js" defer></script>
  <script src="js/chat.js" defer></script> 
  <script src="js/modal.js" defer></script>
  <script src="js/addProduct.js" defer></script>
  <script src="js/profileModal.js" defer></script>

  <!--<script src="js/script.js" defer></script>-->
  
  
</head>
<body>
  <div class="wrapper">

    <!-- Сайдбар/поиск товаров-->
    <div class="container">
      <aside id="sidebar">
        <div class="logo">Mehanik.com.tm</div>

        <h2>Фильтр запчастей</h2>

        <label>Марка:</label>
    <select id="brandSelect">
        <option value="">Выберите марку</option>
    </select>

    <label>Модель:</label>
    <select id="modelSelect" disabled>
        <option value="">Сначала выберите марку</option>
    </select>

    <label>Год выпуска:</label>
    <select id="yearSelect" disabled>
        <option value="">Сначала выберите модель</option>
    </select>

    <label>Комплексная часть:</label>
    <select id="partSelect" disabled>
        <option value="">Сначала выберите год</option>
    </select>

    <label>Компонент:</label>
    <select id="componentSelect" disabled>
        <option value="">Сначала выберите часть</option>
    </select>
    <script>
      // Данные
    const carModels = {
      Toyota: ["4Runner", "86", "Avalon"],
      BMW: ["3 Series", "5 Series", "X5"],
      Mercedes: ["C-Class", "E-Class", "GLA"],
      Audi: ["A3", "A4", "Q5"],
      Honda: ["Civic", "Accord", "CR-V"]
    };

    const years = Array.from({ length: 30 }, (_, i) => 2025 - i);

    const parts = {
      "Кузов": ["Капот","Бампер передний","Бампер задний","Крыло переднее","Крыло заднее","Дверь передняя левая","Дверь передняя правая","Дверь задняя левая","Дверь задняя правая","Крышка багажника","Пятая дверь","Крыша","Порог","Арка колеса","Панель передняя (телевизор)","Задняя панель","Боковая панель","Решетка радиатора","Накладка порога","Молдинг двери","Молдинг крыла","Спойлер","Брызговики","Усилитель бампера","Петля двери","Петля капота","Замок двери","Замок багажника","Стекло лобовое","Стекло заднее","Стекло боковое","Форточка","Стеклоподъемник","Уплотнитель стекла","Обшивка двери","Обшивка стойки","Потолок","Панель пола","Пластик салона","Эмблема","Защита капота","Хром элемент кузова"
    ],
      "Двигатель": ["Блок цилиндров","Головка блока цилиндров (ГБЦ)","Клапанная крышка","Поршень","Поршневые кольца","Шатун","Коленчатый вал (коленвал)","Распредвал","Масляный поддон","Масляный насос","Насос охлаждающей жидкости (помпа)","Термостат","Инжектор","Форсунка","Свеча зажигания","Катушка зажигания","Топливный насос","Топливная рампа","Топливный фильтр","Турбина","Интеркулер","Впускной коллектор","Выпускной коллектор","Дроссельная заслонка","ЭБУ двигателя (мозги)","Привод ГРМ (ремень/цепь)","Натяжитель ремня","Гидрокомпенсатор","Клапан","Сальники двигателя","Подушки двигателя","Ремень генератора","Ремень навесного оборудования"],

      "Трансмиссия": ["Сцепление","Диск сцепления","Корзина сцепления","Выжимной подшипник","Механизм выключения сцепления","Коробка передач (МКПП/АКПП/CVT/DSG)","Маховик","Карданный вал (кардан)","Промежуточный вал","Главная передача","Редуктор","Дифференциал","Полуось","ШРУС внутренний","ШРУС наружный","Приводной вал","Подшипник полуоси","Подвесной подшипник","Масло трансмиссионное","Масляный фильтр КПП","Сальник коробки передач","Кулиса КПП","Трос переключения передач","Масляный радиатор КПП","Компьютер трансмиссии (TCM)"],
      
      "Ходовая часть": ["Амортизатор","Пружина подвески","Стойка амортизатора","Опорный подшипник","Подвеска передняя","Подвеска задняя","Рычаг подвески","Шаровая опора","Сайлентблок","Стабилизатор поперечной устойчивости","Втулка стабилизатора","Тяга стабилизатора","Ступица","Подшипник ступицы","Цапфа","Кулак поворотный","Рессора","Торсион","Подрамник","Кронштейн подвески","Балка задняя","Амортизатор задний","Амортизатор передний","Пыльник амортизатора","Ограничитель хода подвески"],

      "Электрооборудование": ["Аккумулятор","Генератор","Стартер","Реле","Предохранитель","Блок предохранителей","Блок управления (ECU, TCU и пр.)","Проводка (жгут проводов)","Замок зажигания","Кнопка старт-стоп","Электродвигатель вентилятора","Вентилятор охлаждения","Датчик температуры","Датчик положения коленвала","Датчик положения распредвала","Датчик уровня топлива","Датчик скорости","Датчик ABS","Камера заднего вида","Датчик дождя","Датчик света","Зарядное устройство (для гибридов/электро)","Электронный блок рулевого управления","Щетки стеклоочистителя (электропривод)","Стеклоподъемник (электрический)","Электрозамок двери","Моторчик печки","Моторчик стеклоочистителя","Контроллер освещения","Сигнал (клаксон)","Электронный модуль управления светом"],
      
      "Салон": ["Сиденье водительское","Сиденье пассажирское","Заднее сиденье","Руль","Рулевая колонка","Обивка дверей","Обивка потолка","Коврики","Приборная панель (торпеда)","Консоль центральная","Подлокотник","Ручка переключения передач","Педали (газ, тормоз, сцепление)","Подголовник","Бардачок","Подсветка салона","Кнопки и переключатели на панели","Воздуховоды вентиляции","Зеркала внутренние","Кнопка аварийной сигнализации","Крышка люка (если есть)","Декоративные накладки","Динамики и акустика салона","Обшивка стоек","Ручки дверные внутренние","Подсветка ног","Система климат-контроля (панель управления)","Кнопки стеклоподъемников","Пепельница"],

      "Охлаждение": ["Радиатор","Помпа (водяной насос)","Термостат","Вентилятор радиатора","Датчик температуры охлаждающей жидкости","Расширительный бачок","Шланг охлаждения","Трубка охлаждения","Радиатор отопителя (печки)","Крышка радиатора","Трубопровод охлаждения","Патрубок радиатора","Кожух вентилятора","Датчик вентилятора","Обратный клапан системы охлаждения"],

      "Топливная система": ["Бензонасос","Форсунка","Топливный фильтр","Топливный бак","Топливопровод","Топливная рампа","Регулятор давления топлива","Топливный насос высокого давления","Датчик уровня топлива","Клапан обратный топливный","Фильтр тонкой очистки топлива","Топливный фильтр грубой очистки","Шланг топливный","Электроклапан подачи топлива","Топливный адсорбер (угольный фильтр)"],

      "Выхлопная система": ["Глушитель","Катализатор","Резонатор","Выхлопная труба","Коллектор выпускной","Датчик кислорода (лямбда-зонд)","Прокладки выпускного коллектора","Труба промежуточная","Термозащита выхлопа","Фланец выхлопной системы","Задняя труба","Звуковой дефлектор"],

      "Система безопасности": ["Подушка безопасности (Airbag)","Ремень безопасности","Преднатяжитель ремня","ABS (антиблокировочная система тормозов)","ESP (система курсовой устойчивости)","Иммобилайзер","Датчик удара","Датчик положения педали тормоза","Система контроля давления в шинах (TPMS)","Блок управления ABS","Сигнализация","Система контроля слепых зон","Парктроник","Система экстренного торможения (EBA)","Датчик усталости водителя","Крепления ISOFIX","Звуковой сигнал (клаксон)"]
    };
      
      // ===== Селекты =====
      const brandSelect = document.getElementById("brandSelect");
      const modelSelect = document.getElementById("modelSelect");
      const yearSelect = document.getElementById("yearSelect");
      const partSelect = document.getElementById("partSelect");
      const componentSelect = document.getElementById("componentSelect");
      
      // ===== Заполнение брендов =====
      Object.keys(carModels).forEach(brand => {
          let opt = document.createElement("option");
          opt.value = brand;
          opt.textContent = brand;
          brandSelect.appendChild(opt);
      });
      
      // ===== Логика выбора =====
      brandSelect.addEventListener("change", () => {
          modelSelect.innerHTML = '<option value="">Выберите модель</option>';
          yearSelect.innerHTML = '<option value="">Сначала выберите модель</option>';
          partSelect.innerHTML = '<option value="">Сначала выберите год</option>';
          componentSelect.innerHTML = '<option value="">Сначала выберите часть</option>';
      
          modelSelect.disabled = !brandSelect.value;
          yearSelect.disabled = true;
          partSelect.disabled = true;
          componentSelect.disabled = true;
      
          if (brandSelect.value) {
              carModels[brandSelect.value].forEach(model => {
                  let opt = document.createElement("option");
                  opt.value = model;
                  opt.textContent = model;
                  modelSelect.appendChild(opt);
              });
          }
      });
      
      modelSelect.addEventListener("change", () => {
          yearSelect.innerHTML = '<option value="">Выберите год</option>';
          partSelect.innerHTML = '<option value="">Сначала выберите год</option>';
          componentSelect.innerHTML = '<option value="">Сначала выберите часть</option>';
      
          yearSelect.disabled = !modelSelect.value;
          partSelect.disabled = true;
          componentSelect.disabled = true;
      
          if (modelSelect.value) {
              years.forEach(y => {
                  let opt = document.createElement("option");
                  opt.value = y;
                  opt.textContent = y;
                  yearSelect.appendChild(opt);
              });
          }
      });
      
      yearSelect.addEventListener("change", () => {
          partSelect.innerHTML = '<option value="">Выберите часть</option>';
          componentSelect.innerHTML = '<option value="">Сначала выберите часть</option>';
      
          partSelect.disabled = !yearSelect.value;
          componentSelect.disabled = true;
      
          if (yearSelect.value) {
              Object.keys(parts).forEach(part => {
                  let opt = document.createElement("option");
                  opt.value = part;
                  opt.textContent = part;
                  partSelect.appendChild(opt);
              });
          }
      });
      
      partSelect.addEventListener("change", () => {
          componentSelect.innerHTML = '<option value="">Выберите компонент</option>';
          componentSelect.disabled = !partSelect.value;
      
          if (partSelect.value) {
              parts[partSelect.value].forEach(component => {
                  let opt = document.createElement("option");
                  opt.value = component;
                  opt.textContent = component;
                  componentSelect.appendChild(opt);
              });
          }
      });
    </script>

        <!-- Поле поиска и кнопка внизу -->
        <div class="sidebar-bottom">
          <input
            type="text"
            id="partSearch"
            class="sidebar-search"
            placeholder="Поиск по ID или Названию"
            aria-label="Поиск марок"
          />
          <button id="sidebarProfileBtn" class="sidebar-btn-profile">Профиль</button>
          <button id="sidebarProductsBtn" class="sidebar-btn-products">Товары</button> 
          <button class="login-button">Войти</button>
          <button id="addProductBtn" class="add-button">Добавить</button>
        </div>
      </aside>
    
    <!-- Модальное окно для Входа/Регистрации -->
    <div id="authModal" class="modal">
      <div class="modal-content auth-modal-content">
        <span id="authModalClose" class="modal-close"></span>

        <div class="auth-tabs">
          <button id="loginTab" class="auth-tab active">Вход</button>
          <button id="registerTab" class="auth-tab">Регистрация</button>
        </div>

        <div id="loginForm" class="auth-form">
          <input type="tel" id="loginPhone" placeholder="Телефон" required value="+993" maxlength="12" />
          <button id="loginSubmit">Войти</button>
        </div>

        <div id="registerForm" class="auth-form hidden">
          <input type="text" id="registerName" placeholder="Имя" required />
          <input type="tel" id="registerPhone" placeholder="Телефон" required value="+993" maxlength="12" />
          <button id="registerSubmit">Зарегистрироваться</button>
        </div>
      </div>
    </div>
    
    <!-- МОДАЛЬНОЕ ОКНО ДОБАВЛЕНИЯ ПРОДУКТА -->
    <div id="addProductModal" class="addProduct-modal addProduct-hidden">
      <div class="addProduct-modal-content">
        <span id="addProductCloseBtn" class="addProduct-close-button">&times;</span>
        <h2>Добавить продукт</h2>

        <form id="addProductForm">
          <label for="addProductBrand">Марка:</label>
          <select id="addProductBrand" required></select>

          <label for="addProductModel">Модель:</label>
          <select id="addProductModel" required></select>

          <label for="addProductYear">Год:</label>
          <select id="addProductYear" required></select>

          <label for="addProductPartCategory">Комплексная часть:</label>
          <select id="addProductPartCategory" required></select>

          <label for="addProductComponent">Компонент:</label>
          <select id="addProductComponent" required></select>

          <label for="addProductName">Название товара:</label>
          <input type="text" id="addProductName" required />

          <label for="addProductImage">Фото товара:</label>
          <input type="file" id="addProductImage" accept="image/*" required />

          <label for="addProductQuality">Качество:</label>
          <select id="addProductQuality" required>
            <option value="">Выберите...</option>
            <option value="new">Новый</option>
            <option value="used">Б/У</option>
          </select>

          <label for="addProductPrice">Цена:</label>
          <div class="price-input-wrapper">
            <input type="number" id="addProductPrice" placeholder="Введите цену" min="0" required />
            <span class="price-currency">TMT</span>
          </div>


          <label for="addProductDescription">Описание:</label>
          <textarea id="addProductDescription" rows="4" placeholder="Введите описание..." required></textarea>

          <button type="submit">Добавить</button>
        </form>
      </div>
    </div>

    <!-- Личный кабинет Модалка -->
    <div id="profileModal" class="profile-modal">
      <div class="profile-modal-content">
          <span id="profileModalClose" class="profile-modal-close">&times;</span>
          <h2>Профиль</h2>
          <form id="profileForm">
              <label for="profileId">ID:</label>
              <input type="text" id="profileId" name="profileId" readonly>

              <label for="profileName">Имя:</label>
              <input type="text" id="profileName" name="profileName">

              <label for="profileLogo">Лого:</label>
              <input type="file" id="profileLogo" name="profileLogo" accept="image/*">

              <label for="profilePhone">Номер:</label>
              <input type="tel" id="profilePhone" name="profilePhone" placeholder="+993 XX XXX XXX">

              <label for="profileAddress">Адрес:</label>
              <input type="text" id="profileAddress" name="profileAddress">

              <button type="submit">Сохранить</button>
          </form>
      </div>
    </div>

  </div>

  <footer>
    <span>© 2025 mehanik.com.tm</span>
    <span>Создатель: Гарлы Хаджиев</span>
    <span>Email: <a href="mailto:garlyhanhajy@gmail.com">garlyhanhajy@gmail.com</a></span>
    <span>Тел: <a href="tel:+99363722023">+99363722023</a></span>
  </footer> 

  <!-- Floating chat button -->
  <div class="chat-button" id="chatButton">
    💬
  </div>
  <!-- Chat popup window -->
  <div class="chat-popup" id="chatPopup">
    <div class="chat-header">
      <span>Техподдержка</span>
      <button class="close-chat" onclick="toggleChat()">✖</button>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="chat-message bot">Здравствуйте! Чем можем помочь?</div>
    </div>
    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="Введите сообщение..." />
      <button onclick="sendMessage()">📩</button>
    </div>
  </div>

</body>
</html>